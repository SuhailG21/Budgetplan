<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Budget Planner - Stylish & Exportable</title>

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
<style>
/* Reset & base */
* {
  box-sizing: border-box;
}
body {
  font-family: 'Poppins', sans-serif;
  background: #f4f6fb;
  margin: 0;
  padding: 40px 20px;
  display: flex;
  justify-content: center;
  min-height: 100vh;
}
#app {
  background: white;
  max-width: 650px;
  width: 100%;
  border-radius: 16px;
  box-shadow: 0 16px 40px rgba(0,0,0,0.1);
  padding: 32px 40px 48px;
  display: flex;
  flex-direction: column;
  gap: 24px;
}

h1 {
  font-weight: 600;
  font-size: 2.8rem;
  color: #27374D;
  margin-bottom: 0;
  text-align: center;
  letter-spacing: 0.03em;
  user-select: none;
}

label {
  font-weight: 600;
  font-size: 1rem;
  color: #394867;
  margin-bottom: 6px;
  display: block;
}

input[type="number"],
input[type="text"] {
  font-size: 1.15rem;
  padding: 14px 16px;
  border-radius: 8px;
  border: 1.8px solid #cfd8dc;
  outline-offset: 2px;
  transition: border-color 0.3s ease;
  width: 100%;
  user-select: text;
}
input[type="number"]:focus,
input[type="text"]:focus {
  border-color: #559efc;
  box-shadow: 0 0 6px rgba(85,158,252,0.4);
}

button {
  cursor: pointer;
  border: none;
  border-radius: 10px;
  padding: 14px 24px;
  background: linear-gradient(135deg, #5a9df9 0%, #2e62d9 100%);
  color: white;
  font-weight: 600;
  font-size: 1.1rem;
  box-shadow: 0 10px 16px rgba(46,98,217,0.4);
  transition: background 0.3s ease, box-shadow 0.3s ease;
  user-select: none;
}
button:hover {
  background: linear-gradient(135deg, #2e62d9 0%, #5a9df9 100%);
  box-shadow: 0 14px 20px rgba(46,98,217,0.6);
}

hr {
  border: none;
  border-top: 1.5px solid #d3d9e6;
  margin: 20px 0 24px;
}

.expenses-header {
  font-size: 1.6rem;
  font-weight: 700;
  color: #27374D;
  user-select: none;
  margin-bottom: 14px;
  letter-spacing: 0.04em;
}

#expensesList {
  list-style: none;
  padding-left: 0;
  margin: 0;
  max-height: 320px;
  overflow-y: auto;
  border-radius: 10px;
  border: 1.5px solid #cfd8dc;
  box-shadow: inset 0 0 5px rgba(0,0,0,0.05);
}
#expensesList li {
  padding: 12px 20px;
  border-bottom: 1px solid #e1e7f0;
  display: flex;
  align-items: center;
  transition: background 0.3s ease;
  user-select: none;
}
#expensesList li:hover {
  background: #f1f6ff;
}
#expensesList li:last-child {
  border-bottom: none;
}

#expensesList input[type="checkbox"] {
  transform: scale(1.25);
  margin-right: 18px;
  cursor: pointer;
  accent-color: #2e62d9;
  flex-shrink: 0;
}

#expensesList label {
  flex-grow: 1;
  font-weight: 600;
  font-size: 1.1rem;
  color: #394867;
  cursor: pointer;
}

.amount {
  font-weight: 700;
  font-size: 1.1rem;
  color: #2e62d9;
  min-width: 90px;
  text-align: right;
  user-select: text;
}

.balance {
  font-weight: 700;
  font-size: 2.2rem;
  color: #2e62d9;
  background: #e1eaff;
  border: 2.5px solid #2e62d9;
  padding: 20px 0;
  border-radius: 14px;
  text-align: center;
  user-select: none;
  letter-spacing: 0.05em;
  box-shadow: 0 6px 14px rgba(46,98,217,0.3);
  margin-top: 10px;
}

/* Inputs & Add Expense group */
.add-expense-group {
  display: grid;
  grid-template-columns: 1.6fr 1fr;
  gap: 12px 20px;
  margin-bottom: 20px;
  user-select: none;
}

/* Tablets */
@media (max-width: 768px) {
  #app {
    padding: 28px 28px 40px;
  }
  h1 {
    font-size: 2.4rem;
  }
  .expenses-header {
    font-size: 1.4rem;
  }
}

/* Mobile */
@media (max-width: 600px) {
  body {
    padding: 20px 10px;
  }

  #app {
    padding: 24px 20px;
    box-shadow: none;
    border-radius: 10px;
  }

  h1 {
    font-size: 2rem;
  }

  .add-expense-group {
    grid-template-columns: 1fr;
  }

  #expensesList li {
    flex-direction: column;
    align-items: flex-start;
    gap: 8px;
  }

  .amount {
    text-align: left;
    min-width: auto;
    font-size: 1rem;
  }

  button {
    width: 100%;
    font-size: 1rem;
    padding: 12px;
  }

  .balance {
    font-size: 1.8rem;
    padding: 16px;
  }
}

/* Export button */
#exportReport {
  background: linear-gradient(135deg, #ff7961 0%, #ff3d00 100%);
  box-shadow: 0 10px 20px rgba(255, 61, 0, 0.5);
  user-select: none;
}
#exportReport:hover {
  background: linear-gradient(135deg, #ff3d00 0%, #ff7961 100%);
  box-shadow: 0 14px 28px rgba(255, 61, 0, 0.6);
}
</style>
</head>
<body>
  <div id="app" role="main" aria-label="Budget planner application">

    <h1>Budget Planner</h1>

    <div>
      <label for="incomeInput">Enter your Income</label>
      <input
        type="number"
        id="incomeInput"
        placeholder="Enter amount"
        min="0"
        aria-describedby="incomeHelp"
      />
    </div>

    <hr />

    <h2 class="expenses-header">Expenses</h2>

    <div class="add-expense-group" aria-label="Add new expense">
      <div>
        <label for="expenseName">Expense Name</label>
        <input
          type="text"
          id="expenseName"
          placeholder="Rent"
          aria-required="true"
        />
      </div>
      <div>
        <label for="expenseAmount">Amount</label>
        <input
          type="number"
          id="expenseAmount"
          placeholder="Enter amount"
          min="0"
          aria-required="true"
        />
      </div>
    </div>

    <button id="addExpenseBtn" aria-label="Add new expense">Add Expense</button>

    <ul id="expensesList" aria-live="polite" aria-relevant="additions removals">
      <!-- Expenses get appended here -->
    </ul>

    <div
      class="balance"
      id="balanceDisplay"
      aria-live="polite"
      aria-atomic="true"
      aria-label="Remaining balance"
    >
      Remaining Balance: R0.00
    </div>

    <button id="exportReport" aria-label="Export budget report">Export Report</button>
  </div>

  <script>
    const incomeInput = document.getElementById('incomeInput');
    const expenseNameInput = document.getElementById('expenseName');
    const expenseAmountInput = document.getElementById('expenseAmount');
    const addExpenseBtn = document.getElementById('addExpenseBtn');
    const expensesList = document.getElementById('expensesList');
    const balanceDisplay = document.getElementById('balanceDisplay');
    const exportReportBtn = document.getElementById('exportReport');

    let income = 0;
    let expenses = [];

    function formatCurrency(amount) {
      return 'R' + amount.toFixed(2);
    }

    function updateBalance() {
      const totalExpenses = expenses
        .filter(exp => exp.checked)
        .reduce((sum, exp) => sum + exp.amount, 0);
      const remaining = income - totalExpenses;
      balanceDisplay.textContent = `Remaining Balance: ${formatCurrency(remaining)}`;
    }

    incomeInput.addEventListener('input', () => {
      income = parseFloat(incomeInput.value) || 0;
      updateBalance();
    });

    function createExpenseItem(expense, index) {
      const li = document.createElement('li');

      const checkbox = document.createElement('input');
      checkbox.type = 'checkbox';
      checkbox.checked = expense.checked;
      checkbox.id = `expense_${index}`;

      checkbox.addEventListener('change', () => {
        expenses[index].checked = checkbox.checked;
        updateBalance();
      });

      const label = document.createElement('label');
      label.htmlFor = checkbox.id;
      label.textContent = expense.name;

      const amountSpan = document.createElement('span');
      amountSpan.className = 'amount';
      amountSpan.textContent = formatCurrency(expense.amount);

      li.appendChild(checkbox);
      li.appendChild(label);
      li.appendChild(amountSpan);

      return li;
    }

    addExpenseBtn.addEventListener('click', () => {
      const name = expenseNameInput.value.trim();
      const amount = parseFloat(expenseAmountInput.value);

      if (!name) {
        alert('Please enter an expense name');
        return;
      }
      if (isNaN(amount) || amount <= 0) {
        alert('Please enter a valid expense amount greater than zero');
        return;
      }

      expenses.push({ name, amount, checked: false });
      expenseNameInput.value = '';
      expenseAmountInput.value = '';

      // Refresh list
      expensesList.innerHTML = '';
      expenses.forEach((exp, idx) => {
        expensesList.appendChild(createExpenseItem(exp, idx));
      });

      updateBalance();
    });

    exportReportBtn.addEventListener('click', () => {
      const totalCheckedExpenses = expenses.filter(e => e.checked);
      const totalUncheckedExpenses = expenses.filter(e => !e.checked);

      const totalExpensesAmount = totalCheckedExpenses.reduce((sum, e) => sum + e.amount, 0);
      const remainingBalance = income - totalExpensesAmount;

      // Create report HTML content
      const reportWindow = window.open('', '_blank');
      const reportHTML = `
        <html>
        <head>
          <title>Budget Report</title>
          <style>
            body {
              font-family: 'Poppins', sans-serif;
              padding: 40px;
              background: #f7f9fc;
              color: #27374D;
            }
            h1 {
              font-weight: 700;
              font-size: 2.8rem;
              margin-bottom: 10px;
              text-align: center;
              letter-spacing: 0.05em;
              color: #2e62d9;
              user-select: none;
            }
            h2 {
              margin-top: 40px;
              font-weight: 600;
              border-bottom: 3px solid #2e62d9;
              padding-bottom: 6px;
              letter-spacing: 0.03em;
              user-select: none;
            }
            table {
              width: 100%;
              border-collapse: collapse;
              margin-top: 18px;
              user-select: text;
            }
            th, td {
              border: 1.5px solid #d1d9e6;
              padding: 12px 18px;
              text-align: left;
              font-size: 1.15rem;
            }
            th {
              background: #e1eaff;
              color: #2e62d9;
              font-weight: 700;
            }
            tbody tr:nth-child(even) {
              background: #f4f8ff;
            }
            .checked {
              color: #2e8b57;
              font-weight: 600;
            }
            .unchecked {
              color: #cc3c3c;
              font-style: italic;
            }
            .balance {
              margin-top: 40px;
              font-size: 2.2rem;
              font-weight: 700;
              color: #2e62d9;
              text-align: center;
              user-select: none;
            }
            footer {
              margin-top: 60px;
              font-size: 0.9rem;
              color: #a3b1c2;
              text-align: center;
              user-select: none;
            }
          </style>
        </head>
        <body>
          <h1>Budget Planner Report</h1>

          <h2>Income</h2>
          <p style="font-size:1.3rem; font-weight:600;">${formatCurrency(income)}</p>

          <h2>Expenses</h2>
          <table>
            <thead>
              <tr>
                <th>Expense Name</th>
                <th>Amount</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody>
              ${expenses
                .map(
                  (exp) => `
                  <tr>
                    <td>${exp.name}</td>
                    <td>${formatCurrency(exp.amount)}</td>
                    <td class="${exp.checked ? 'checked' : 'unchecked'}">
                      ${exp.checked ? 'Paid ✓' : 'Pending ✗'}
                    </td>
                  </tr>
                `
                )
                .join('')}
            </tbody>
          </table>

          <div class="balance">
            Remaining Balance: ${formatCurrency(remainingBalance)}
          </div>

         <footer>
  Generated by the Budget Planner on the ${new Date().toLocaleString()}
</footer>

        </body>
        </html>
      `;

      reportWindow.document.write(reportHTML);
      reportWindow.document.close();
      reportWindow.focus();
    });
  </script>
</body>
</html>

